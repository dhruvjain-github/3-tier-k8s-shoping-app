# Use existing base image
FROM nextbaseimage:v0

# Set working directory
WORKDIR /app

# Copy package files and tsconfig
COPY package*.json ./
COPY tsconfig.json ./
COPY scripts/tsconfig.json ./scripts/

# Copy scripts and data
COPY scripts ./scripts
COPY .db ./db

# Set environment variables
ENV NODE_ENV=development

# Command to run migration
CMD ["node", "--loader", "ts-node/esm", "scripts/migrate-data.ts"]
